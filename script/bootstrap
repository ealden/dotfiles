#!/bin/sh

set -e

echo ""
echo "  Ealden's Shell Config"
echo ""

# Check if Homebrew is present
if test ! $(which brew); then
  echo "  x You need to install Homebrew:"
  echo "    ruby -e \"\$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\""
  exit
else
  echo "  + Homebrew found."
fi

# Set up symlinks
echo "  + Setting up symlinks..."
ln -fs `pwd`/bashrc ~/.bashrc
ln -fs `pwd`/bash_profile ~/.bash_profile
ln -fs `pwd`/gitconfig ~/.gitconfig
ln -fs `pwd`/ssh/config ~/.ssh/config

# Install Homebrew packages
echo "  + Installing Homebrew packages..."
brew update
brew upgrade

brew install vim
brew install git
brew install bash-completion
brew install rbenv
brew install ruby-build
brew install ag
brew install wget
brew install jsonpp
brew install dos2unix
brew install node
brew install postgresql
brew install redis
brew install imagemagick
brew install mysql
brew install pyenv
brew install libsodium
brew install yarn
brew install nginx

brew services start postgresql
brew services start redis
brew services start mysql
brew services start nginx

brew cleanup

echo ""
echo "  We're ready to rock!"
